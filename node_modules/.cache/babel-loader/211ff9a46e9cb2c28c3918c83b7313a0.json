{"ast":null,"code":"import _classCallCheck from \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/src/components/UserPosts.js\";\nimport React, { Component } from 'react';\nimport Auth from '../modules/Auth.js';\nimport EditPost from './EditPost';\n\nvar UserPost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserPost, _Component);\n\n  function UserPost(props) {\n    var _this;\n\n    _classCallCheck(this, UserPost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserPost).call(this, props));\n\n    _this.pageLoad = function () {\n      fetch('http://localhost:3000/profile', {\n        method: 'GET',\n        headers: {\n          token: Auth.getToken(),\n          'Authorization': \"Token \".concat(Auth.getToken())\n        }\n      }).then(function (res) {\n        res.json().then(function (data) {\n          _this.setState({\n            myPosts: data.posts\n          });\n        }, function (err) {\n          console.log(err);\n        });\n      });\n    };\n\n    _this.deletePost = function (id, index) {\n      fetch(\"http://localhost:3000/posts/\" + id, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n          token: Auth.getToken(),\n          'Authorization': \"Token \".concat(Auth.getToken())\n        }\n      }).then(function (res) {\n        _this.removeFromArr(index);\n      });\n    };\n\n    _this.removeFromArr = function (index) {\n      _this.setState(function (prevState) {\n        prevState.myPosts.splice(index, 1);\n        return {\n          myPosts: prevState.myPosts\n        };\n      });\n    };\n\n    _this.handleEdit = function (post) {\n      _this.setState({\n        post: post\n      });\n\n      _this.toggleEdit();\n    };\n\n    _this.toggleEdit = function () {\n      _this.setState(function (pre) {\n        pre.editForm = !pre.editForm;\n        return {\n          editForm: pre.editForm\n        };\n      });\n    };\n\n    _this.state = {\n      myPosts: [],\n      editForm: false\n    };\n    return _this;\n  }\n\n  _createClass(UserPost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.pageLoad();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Your Posts\"), this.state.editForm ? React.createElement(EditPost, {\n        reload: this.pageLoad,\n        toggle: this.toggleEdit,\n        post: this.state.post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }) : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, this.state.myPosts.map(function (post, index) {\n        return React.createElement(\"div\", {\n          key: post.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, post.title), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, post.info, React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this2.deletePost(post.id, index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \"   X   \"), React.createElement(\"button\", {\n          onClick: function onClick() {\n            _this2.handleEdit(post);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Edit\")));\n      })));\n    }\n  }]);\n\n  return UserPost;\n}(Component);\n\nexport default UserPost;","map":{"version":3,"sources":["/Users/c/Desktop/project_4/project4_frontend/project_4_frontend/src/components/UserPosts.js"],"names":["React","Component","Auth","EditPost","UserPost","props","pageLoad","fetch","method","headers","token","getToken","then","res","json","data","setState","myPosts","posts","err","console","log","deletePost","id","index","removeFromArr","prevState","splice","handleEdit","post","toggleEdit","pre","editForm","state","map","title","info"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UAWnBC,QAXmB,GAWR,YAAM;AACfC,MAAAA,KAAK,CAAC,+BAAD,EAAiC;AACpCC,QAAAA,MAAM,EAAC,KAD6B;AAEpCC,QAAAA,OAAO,EAAC;AACNC,UAAAA,KAAK,EAAER,IAAI,CAACS,QAAL,EADD;AAEN,2CAA0BT,IAAI,CAACS,QAAL,EAA1B;AAFM;AAF4B,OAAjC,CAAL,CAOCC,IAPD,CAOM,UAACC,GAAD,EAAS;AACbA,QAAAA,GAAG,CAACC,IAAJ,GACCF,IADD,CACM,UAACG,IAAD,EAAU;AACd,gBAAKC,QAAL,CAAc;AAACC,YAAAA,OAAO,EAACF,IAAI,CAACG;AAAd,WAAd;AACD,SAHD,EAGE,UAACC,GAAD,EAAS;AACTC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,SALD;AAMD,OAdD;AAeD,KA3BkB;;AAAA,UA6BnBG,UA7BmB,GA6BN,UAACC,EAAD,EAAKC,KAAL,EAAe;AAC1BjB,MAAAA,KAAK,CAAC,iCAA+BgB,EAAhC,EAAmC;AACtCf,QAAAA,MAAM,EAAE,QAD8B;AAEtCC,QAAAA,OAAO,EAAC;AACN,oBAAU,mCADJ;AAEN,0BAAgB,kBAFV;AAGNC,UAAAA,KAAK,EAAER,IAAI,CAACS,QAAL,EAHD;AAIN,2CAA0BT,IAAI,CAACS,QAAL,EAA1B;AAJM;AAF8B,OAAnC,CAAL,CAQGC,IARH,CAQQ,UAACC,GAAD,EAAS;AACf,cAAKY,aAAL,CAAmBD,KAAnB;AACD,OAVD;AAWD,KAzCkB;;AAAA,UA2CnBC,aA3CmB,GA2CH,UAACD,KAAD,EAAW;AACzB,YAAKR,QAAL,CAAc,UAACU,SAAD,EAAe;AAC3BA,QAAAA,SAAS,CAACT,OAAV,CAAkBU,MAAlB,CAAyBH,KAAzB,EAA+B,CAA/B;AACA,eAAM;AACJP,UAAAA,OAAO,EAAES,SAAS,CAACT;AADf,SAAN;AAGD,OALD;AAMD,KAlDkB;;AAAA,UAoDnBW,UApDmB,GAoDN,UAACC,IAAD,EAAU;AACrB,YAAKb,QAAL,CAAc;AACZa,QAAAA,IAAI,EAACA;AADO,OAAd;;AAGA,YAAKC,UAAL;AACD,KAzDkB;;AAAA,UA2DnBA,UA3DmB,GA2DN,YAAM;AACjB,YAAKd,QAAL,CAAc,UAACe,GAAD,EAAS;AACrBA,QAAAA,GAAG,CAACC,QAAJ,GAAe,CAACD,GAAG,CAACC,QAApB;AACA,eAAM;AACJA,UAAAA,QAAQ,EAAED,GAAG,CAACC;AADV,SAAN;AAGD,OALD;AAMD,KAlEkB;;AAEjB,UAAKC,KAAL,GAAa;AACXhB,MAAAA,OAAO,EAAE,EADE;AAEXe,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAFiB;AAMlB;;;;wCACkB;AACjB,WAAK1B,QAAL;AACD;;;6BA2DO;AAAA;;AACN,aACE,0CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,EAEC,KAAK2B,KAAL,CAAWD,QAAX,GAAqB,oBAAC,QAAD;AAAU,QAAA,MAAM,EAAE,KAAK1B,QAAvB;AACpB,QAAA,MAAM,EAAE,KAAKwB,UADO;AACK,QAAA,IAAI,EAAE,KAAKG,KAAL,CAAWJ,IADtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArB,GACmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACjD,KAAKI,KAAL,CAAWhB,OAAX,CAAmBiB,GAAnB,CAAuB,UAACL,IAAD,EAAML,KAAN,EAAgB;AACtC,eACE;AAAK,UAAA,GAAG,EAAEK,IAAI,CAACN,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKM,IAAI,CAACM,KAAV,CADF,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIN,IAAI,CAACO,IAAT,EACA;AACA,UAAA,OAAO,EAAE;AAAA,mBAAI,MAAI,CAACd,UAAL,CAAgBO,IAAI,CAACN,EAArB,EAAwBC,KAAxB,CAAJ;AAAA,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,EAIA;AAAQ,UAAA,OAAO,EAAE,mBAAM;AACrB,YAAA,MAAI,CAACI,UAAL,CAAgBC,IAAhB;AACD,WAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJA,CAFJ,CADF;AAcD,OAfA,CADiD,CAHpD,CADF;AAyBD;;;;EA/FoB5B,S;;AAkGvB,eAAeG,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport Auth from '../modules/Auth.js'\nimport EditPost from './EditPost'\n\nclass UserPost extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      myPosts: [],\n      editForm: false\n    }\n  }\n  componentDidMount(){\n    this.pageLoad()\n  }\n\n  pageLoad = () => {\n    fetch('http://localhost:3000/profile',{\n      method:'GET',\n      headers:{\n        token: Auth.getToken(),\n        'Authorization': `Token ${Auth.getToken()}`\n      }\n    })\n    .then((res) => {\n      res.json()\n      .then((data) => {\n        this.setState({myPosts:data.posts})\n      },(err) => {\n        console.log(err);\n      })\n    })\n  }\n\n  deletePost = (id, index) => {\n    fetch(\"http://localhost:3000/posts/\"+id,{\n      method: 'DELETE',\n      headers:{\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n        token: Auth.getToken(),\n        'Authorization': `Token ${Auth.getToken()}`\n      }\n    }).then((res) => {\n      this.removeFromArr(index)\n    })\n  }\n\n  removeFromArr = (index) => {\n    this.setState((prevState) => {\n      prevState.myPosts.splice(index,1)\n      return{\n        myPosts: prevState.myPosts\n      }\n    })\n  }\n\n  handleEdit = (post) => {\n    this.setState({\n      post:post\n    })\n    this.toggleEdit()\n  }\n\n  toggleEdit = () => {\n    this.setState((pre) => {\n      pre.editForm = !pre.editForm\n      return{\n        editForm: pre.editForm\n      }\n    })\n  }\n\n  render(){\n    return(\n      <>\n      <h2>Your Posts</h2>\n      {this.state.editForm? <EditPost reload={this.pageLoad}\n        toggle={this.toggleEdit} post={this.state.post}/>:<span>\n        {this.state.myPosts.map((post,index) => {\n          return(\n            <div key={post.id}>\n              <h2>{post.title}</h2>\n                <p>{post.info}\n                <span\n                onClick={()=>this.deletePost(post.id,index)}\n                >   X   </span>\n                <button onClick={() => {\n                  this.handleEdit(post)\n                }}>Edit</button>\n                </p>\n\n            </div>\n          )\n        })}\n        </span>}\n\n      </>\n    )\n  }\n}\n\nexport default UserPost;\n"]},"metadata":{},"sourceType":"module"}